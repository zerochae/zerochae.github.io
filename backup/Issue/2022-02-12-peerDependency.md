---
title: Issue &#35;1
description: Peer Dependency
date: 2022-02-11 09:00
category: Issue
tags: [Issue]
---

## Unable to Resolve Dependency Tree

![Error](https://user-images.githubusercontent.com/84373490/153573779-801d3bb0-4fe0-4e9c-b04b-86b86ed67254.jpg)

í”„ë¡œì íŠ¸ ì´ˆê¸°ì„¤ì •ì„ ìœ„í•´ `craco`ë¥¼ ì„¤ì¹˜í•˜ë˜ ì¤‘ ì—ëŸ¬ë¥¼ ë§Œë‚¬ë‹¤.

ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì½ì–´ë³´ë‹ˆ `craco` ì„¤ì¹˜ë¥¼ ìœ„í•´ì„œëŠ” `react-scripts ^4.0.0`ì´ í•„ìš”í•œë°, í˜„ì¬ í”„ë¡œì íŠ¸ëŠ” `react-scripts 5.0.0` ë¼ëŠ” ë²„ì „ ì—ëŸ¬ì´ë‹¤. ê·¸ë¦¬ê³  `--force`ë‚˜ `--legacy-peer-deps` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ í•´ê²°í•  ìˆ˜ ìˆì§€ë§Œ ì ì¬ì ìœ¼ë¡œ ê¹¨ì§ˆ ìˆ˜ ìˆì§€ë§Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.

[What does npm install --legacy-peer-deps do exactly?ğŸš€](https://stackoverflow.com/questions/66239691/what-does-npm-install-legacy-peer-deps-do-exactly-when-is-it-recommended-wh)

[When to use --force and --legacy-peer-deps?ğŸš€](https://stackoverflow.com/questions/66020820/npm-when-to-use-force-and-legacy-peer-deps)

ìœ„ ë¬¸ì„œì˜ ìš”ì•½ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

ìš°ë¦¬ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ë©´ `package.json`ì˜ `dependencies` , `devDependencies` í•­ëª©ì— ê¸°ë¡ì´ ëœë‹¤. ê·¸ë¦¬ê³  ì—¬ê¸°ì— ê¸°ë¡ë˜ì§€ ì•ŠëŠ” `peerDependencies` ë¼ëŠ” í•­ëª©ì´ ìˆë‹¤. ì´ í•­ëª©ì€ í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì‹¤í–‰ì„ ìœ„í•´ì„œ í•„ìš”í•œ `dependencies`ì˜ ì •ë³´ì´ë‹¤. ì´ í•­ëª©ì€ `package-lock.json`ì— ê¸°ë¡ë˜ì–´ ìˆë‹¤.

![peer](https://user-images.githubusercontent.com/84373490/153626757-acc2be23-6b51-4bc5-b2fa-ee9b71709303.jpg)

`react-scripts`ì˜ ë²„ì „ ì •ë³´ê°€ `^4.0.0` ìœ¼ë¡œ í‘œê¸° ë˜ì–´ìˆë‹¤. `caret(^)` ê¸°í˜¸ëŠ” ìˆ«ìì˜ ê°œìˆ˜, 0ì˜ ì²˜ìŒ ìœ„ì¹˜ì— ë”°ë¼ ê·¸ ëœ»ì´ ë‹¬ë¼ì§€ëŠ”ë° ì—¬ê¸°ì„œëŠ” 4.0.0 <= version < 5.0.0 ì‚¬ì´ì˜ ë²„ì „(`4.*.*`)ì„ ì˜ë¯¸í•œë‹¤.  

`dependency`ëŠ” ë‚´ê°€ ë§Œë“  ëª¨ë“ˆì—ì„œ ì‚¬ìš©í•˜ëŠ” íŒ¨í‚¤ì§€ë¥¼ ì§€ì •í•˜ëŠ” ë°˜ë©´, `peerDependencies`ëŠ” ë°˜ëŒ€ë¡œ ë‚´ê°€ ë§Œë“  ëª¨ë“ˆì´ ë‹¤ë¥¸ ëª¨ë“ˆê³¼ í•¨ê»˜ ë™ì‘í•  ìˆ˜ ìˆë‹¤ëŠ” í˜¸í™˜ì„±ì„ í‘œì‹œí•˜ëŠ” ê²ƒì´ë‹¤. ì´ëŸ° ê²ƒì„ í”ŒëŸ¬ê·¸ì¸ì´ë¼ê³  í•œë‹¤.

ë§ì´ ì–´ë µì§€ë§Œ, ë°‘ì„ ê³„ì† ë³´ë©´ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆë‹¤.

ìš°ë¦¬ëŠ” `craco`ë¥¼ ì„¤ì¹˜í•˜ë ¤ê³  í–ˆì„ ë•Œ `carco`ì˜ `peerDependencies` í•­ëª©ì˜ `react-scripts ^4.0.0`ì´ í•„ìš”í•˜ë‹¤ê³  í–ˆì§€ë§Œ í”„ë¡œì íŠ¸ì—ëŠ” `react-scripts 5.0.0`ì´ê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²ƒ ì´ë‹¤.

`npm VER.4 ~ 6` ê¹Œì§€ëŠ” `peerDependencies` ê´€ë ¨ ì´ìŠˆê°€ ë°œìƒí•˜ë©´ ì˜¤ë¥˜ê°€ ì•„ë‹Œ ê²½ê³ ë¥¼ ì¶œë ¥í–ˆì§€ë§Œ, 21ì›” 2ì›” `npm VER.7`ì´ ì¶œì‹œë˜ë©´ì„œ(í˜„ì¬ëŠ” `VER.8`) ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ”ê²ƒìœ¼ë¡œ ë³€ê²½ë˜ì—ˆë‹¤. 

<hr/>

### force

ì—¬ê¸°ì„œ `--force` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ í•„ìš”í•œ `peerDependencies`ë¥¼ ì¶”ê°€ í›„, ì„¤ì¹˜ë¥¼ ì§„í–‰í•œë‹¤.

![force](https://user-images.githubusercontent.com/84373490/153630787-d53ebd82-7829-4038-babf-bee1b9c3766e.jpg)

ìœ„ ì‚¬ì§„ì—ì„œëŠ” `react-scripts ^4.0.0`ì„ ì„¤ì¹˜í•˜ë ¤í–ˆì§€ë§Œ ì¶©ëŒì´ ë°œìƒí•˜ì—¬ ì •ìƒ ì™„ë£Œ ë˜ì§€ ì•Šì•˜ëŠ”ë°, ì´ìƒí•˜ê²Œ `craco`ëŠ” ì„¤ì¹˜ê°€ ë˜ì—ˆê³  **í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰**ì‹œí‚¬ ìˆ˜ ìˆì—ˆë‹¤.ì—¬ê¸°ì„œ ë§Œì•½ ì„¤ì¹˜ì— ì‹¤íŒ¨í•œë‹¤ë©´ 
```
npm ERR! Fix the upstream dependency conflict, or retry
npm ERR! this command with --force, or --legacy-peer-deps
npm ERR! to accept an incorrect (and potentially broken) dependency resolution.
```
ë¼ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•œë‹¤.

`peerDependency`ì˜ ë²„ì „ì´ ë§ì§€ ì•Šì•˜ëŠ”ë° runì´ ëœ ì´ìœ ëŠ” `craco`ì—ì„œ react-scriptì˜ ë²„ì „ ì»¤ìŠ¤í…€ì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì´ì˜€ë‹¤. ì´ ê¸°ëŠ¥ì€ `craco`ê°€ ë²„ì „ì—…ë˜ë©´ì„œ ì¶”ê°€ëœ ê¸°ëŠ¥ì¸ê²ƒ ê°™ë‹¤. ê·¸ëƒ¥ `5.0.0` ë²„ì „ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥ í•˜ë‹¤ëŠ” ë§ì´ë‹¤. 

![cracoconfig](https://user-images.githubusercontent.com/84373490/153699678-5d4a61b7-e869-462e-aeba-85b80ad500e6.jpg)

ì—­ì‹œ.. ê³µì‹ë¬¸ì„œë¥¼ ì˜ ì½ëŠ” ìŠµê´€ì„ ë“¤ì—¬ì•¼ í•œë‹¤ëŠ”ê±¸ ë‹¤ì‹œ í•œë²ˆ ëŠê¼ˆë‹¤.

<hr/>

### legacy-peer-deps

`--legacy-peer-deps` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ `peerDependencies` ì„¤ì¹˜ ì—†ì´, ì„¤ì¹˜ë¥¼ ì§„í–‰í•œë‹¤.

![legacy](https://user-images.githubusercontent.com/84373490/153620989-6b802011-9255-4e0a-85bb-33b29e6a1d32.jpg)

í•„ìš”í•œ `peerDependency`ë¥¼ ì„¤ì¹˜í•˜ë ¤ëŠ” ì‹œë„ë¥¼ í•˜ì§€ ì•Šê³  í•´ë‹¹ ì´ìŠˆë¥¼ ë¬´ì‹œí•œë‹¤. ê·¸ë¦¬ê³  ìœ„ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì‹¤í–‰ì´ ë˜ëŠ” ì´ìœ ëŠ” ë²„ì „ ì»¤ìŠ¤í…€ì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

<hr/>

## ê²°ë¡ 

ì²˜ìŒ í•´ë‹¹ ì´ìŠˆë¡œ êµ¬ê¸€ë§ì„ í•˜ì˜€ì„ë•Œ `craco`ì„¤ì¹˜ ì‹œ `--legacy-peer-deps`ë¥¼ ì…ë ¥í•˜ë¼ëŠ” ê¸€ì„ ë¨¼ì € ë°œê²¬í•˜ì˜€ë‹¤. ê·¸ ì´ìœ ëŠ” ìœ„ì—ì„œ ë§í•œ ëŒ€ë¡œ ë²„ì „ ì»¤ìŠ¤í…€ ë•ë¶„ì— ì¶”ê°€ë¡œ `dependency`ë¥¼ ì„¤ì¹˜í•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì´ë‹¤. í•˜ì§€ë§Œ ë§Œì•½ ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ì‹œ í•´ë‹¹ ì´ìŠˆë¥¼ ë§Œë‚œë‹¤ë©´ `--force` í‚¤ì›Œë“œ ì‚¬ìš©ì„ ì¶”ì²œí•œë‹¤. ë²„ì „ì„ ê³ ì •ì‹œí‚¤ë ¤ëŠ” ì‹œë„ê°€ ìˆê¸° ë•Œë¬¸ì— `--legacy-peer-deps` í‚¤ì›Œë“œë³´ë‹¤ ì—„ê²©í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.